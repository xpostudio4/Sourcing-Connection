{% extends "base.html" %}

{% block title %}{{ company.name  }}{% endblock %}
{% block external %}
    <script src="{{ STATIC_URL}}colorbox/jquery.colorbox-min.js"></script>
    <link rel="stylesheet" href="{{ STATIC_URL}}colorbox/colorbox.css" /> 
    <script>
        jQuery(document).ready(function () {
            jQuery('a.gallery').colorbox({ opacity:0.5 , rel:'group1' });
        });
    </script>
    <script>
       $(document).ready(function(){

        //A list of all the classes and Id's of the elements to be treated as read only tags.
        var tag_ids  = ['#company-product','#company-certification', '#company-industries', '#company-customers', '#company-offices', '#company-tags', '#company-applications', '#company-technologies']; 



        //for(i in tag_ids){

            //Create read only tags for the degrees field
            //var degrees =  $(this).find(tag_ids[i]).html().split(",");
            //var string_degrees = ""; 


            //for( j  in degrees){
            //  string_degrees += "<code>" + degrees[j] + "</code>  ";
            //}

            //$(tag_ids[i]).html(string_degrees);

        //}
        //Obtain twitter name and prettify it for the profile
        var twitter_name  = $(this).find('#company-twitter-url').text().split("/").pop();
            $('#company-twitter-url').text("@"+twitter_name);
            
            
       
        //Obtain the facebook profile name.
        var facebook_name  = $(this).find('#company-facebook-url').text().split("/").pop();
        $('#company-facebook-url').text(facebook_name)


       })
</script>
{% endblock %}

{% block content %}
<br/>
        {% if percentage_profile %}
            <h2 class="pagination-centered">Profile {{ percentage_profile.percentage }}% complete</h2>
            <div class="percentage-box ">
                
               <div class="progress span5">

                    <div class="bar" style="width: {{ percentage_profile.percentage }}%;"></div>
               </div>
            </div>



        {% endif %}
        <br/>


        {% if  user.is_staff or user.is_superuser or permission %}
            
                <div class="pull-right" style="margin-right:80px;">
                    <button type="button" class="btn btn-primary" data-toggle="button" ONCLICK="window.location.href='/company/{{ company.slug }}/update'">  Edit  </button>
                </div>
         
        {% endif %}
<br/>
        
        <div class="media">
            <a class="pull-left" href="#">
                {% if company.logo %}
    
                <img class="img-polaroid" data-src="holder.js/64x64" src="{{ MEDIA_URL }}{{ company.logo }}" height="130", width="178">
                {% else %}
                <img class="img-polaroid" data-src="holder.js/64x64" src="{{ STATIC_URL }}images/no_logo.png" height=96, width=140  >
                
                {% endif %}
            </a>
        <div class="pull-right" style="margin-right:80px;"> 
        <div class="btn-group">
            <button class="btn">Follow</button>
                <button class="btn dropdown-toggle" data-toggle="dropdown">
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
                <li><a tabindex="-1" href="#">Contact Company</a></li>
                <li><a tabindex="-1" href="#">Follow Blog</a></li>
                <li class="divider"></li>
                <li><a tabindex="-1" href="#">Something else here</a></li>
            </ul>
         </div>
        </div>
     <div class="media">
        <h2 class="media-heading">{{ company.name  }} </h2>
        <p class="muted">{{ company.value_proposition  }}</p>
         
    </div>
    <div class="span10">
        
        
        
        <div class="media">
            <h4 class="media-heading"><strong class="muted">Company Description:</strong></h4>
            <p> {{ company.description  }}</p>
        </div>
    
    <div class="media">
<table class="table">
    <tbody>
        {% for link in companylinks %}
            <tr>
                <td>Company Link:</td>
                <td><a href="{{ link.web_url }}">{{ link.web_url }}</a></td>
                <td>Company Blog:</td>
                <td><a href="{{ link.blog_url  }}">{{ link.blog_url  }}</a></td>
            </tr>
            <tr>
                <td>Twitter:</td>
                <td >{% if  link.twitter_url  %}<a href="{{ link.twitter_url  }}" id = "company-twitter-url" >{{ link.twitter_url  }}</a>{% endif %}</td>
                
                <td>Facebook:</td>
                <td ><a href="{{ link.facebook_link  }}" id="company-facebook-url">{{ link.facebook_link  }}</a></td>
            </tr>
        {% endfor%}
    
        {% if  user.is_staff or user.is_superuser or permission %}
        <ul class="nav nav-list pull-right">
            <li><a href="/company/{{ company.slug }}/links/update"><i class="icon-plus"></i> Updatind links</a></li>
        </ul>

        <tr>
            <td>Email: </td>
            <td><a href="mailto:{{ company.email  }}">{{ company.email  }} </a></td>
            <td>Phone Contact:</td>
            <td>{{ company.main_phone }}</td>
        </tr>
        {% endif %}
        <tr>
            <td>Products:</td>
            <td  id="company-product">{{ company.product }}</td>
        </tr>
        <tr>
            <td>Related Categories:</td>
            <td id="company-tags">{{ company.tags }}</td>
            <td>Applications:</td>
            <td id="company-applications">{{ company.applications }}</td>
        </tr>

    </tbody>

</table>
            
</div>

<div>
<div class="media">
    <h4 class="media-heading"><strong class="muted">Overview:</strong></h4>
    <p id="company-overview">{{ company.overview  }}</p>
</div>
<div class="media">
    <h4 class="media-heading"><strong class="muted">Related Industries:</strong></h4>
    <p id="company-industries">{{ company.industries }}</p>

    {% if  user.is_staff or user.is_superuser or permission %}

        {############################################## Customers ###################################}
        <div class="media">
                

                <h4 class="media-heading"><strong class="muted">Customers:</strong></h4></br>
                <ul class="nav nav-list pull-right">
                    <li><a href="/company/{{ company.slug }}/customers/new"><i class="icon-plus"></i> Add Customers</a></li>
                </ul>

                <br/>
                <ul class="pull-left inline">
                {% for customer in customers  %}
                
                        <li><a id="{{ company.slug }}-customers-{{ customer.id }}" onclick="{{ company.slug }}_customers_{{ customer.id }}(); return false;" href="/company/{{ company.slug }}/customers/{{customer.id}}/delete"><i class="icon-remove"></i></a>  <a href="/company/{{ company.slug }}/customers/{{customer.id}}/update">{{ customer.name }}</a></li>{% if not forloop.last %}, {% endif %}
                
                <script>
                function {{ company.slug }}_customers_{{ customer.id }}(){
                    var r = confirm("Are You sure You want to delete customer {{ customer.name }}");
                    if( r == true){
                        return document.location.href = "/company/{{ company.slug }}/customers/{{customer.id}}/delete";
                    }else{
                        return false;
                    }
                }
                </script>
                    
                {% endfor %}    
                </ul>
        </div>

                {############################################## Awards ##############################}

        <div class="media">
        

            <h4 class="media-heading"><strong class="muted">Awards:</strong></h4></br>
            <ul class="nav nav-list pull-right">
                <li><a href="/company/{{ company.slug }}/awards/new"><i class="icon-plus"></i> Add award</a></li>
            </ul>

            <br/>
            <ul class="pull-left inline">
            {% for award in awards  %}
            
                    <li><a id="{{ company.slug }}-awards-{{ award.id }}" onclick="{{ company.slug }}_awards_{{ award.id }}(); return false;" href="/company/{{ company.slug }}/awards/{{award.id}}/delete"><i class="icon-remove"></i></a>  <a href="/company/{{ company.slug }}/awards/{{award.id}}/update">{{ award.name }}</a></li>{% if not forloop.last %}, {% endif %}
            
            <script>
            function {{ company.slug }}_awards_{{ award.id }}(){
                var r = confirm("Are You sure You want to delete Award {{ award.name }}");
                if( r == true){
                    return document.location.href = "/company/{{ company.slug }}/awards/{{award.id}}/delete";
                }else{
                    return false;
                }
            }
            </script>
                
            {% endfor %}    
            </ul>
        </div>

        {############################################## Certifications ##############################}
        <div class="media">
            <h4 class="media-heading"><strong class="muted">Certifications:</strong></h4></br>
            <ul class="nav nav-list pull-right">
                <li><a href="/company/{{ company.slug }}/certifications/new"><i class="icon-plus"></i> Add Certification</a></li>
            </ul>

            <br/>
            <ul class="pull-left inline">
            {% for certification in certifications  %}
            
                    <li><a id="{{ company.slug }}-certifications-{{ certification.id }}" onclick="{{ company.slug }}_certifications_{{ certification.id }}(); return false;" href="/company/{{ company.slug }}/certifications/{{certification.id}}/delete"><i class="icon-remove"></i></a>  <a href="/company/{{ company.slug }}/certifications/{{certification.id}}/update">{{ certification.name }}</a></li>{% if not forloop.last %}, {% endif %}
            
            <script>
            function {{ company.slug }}_certifications_{{ certification.id }}(){
                var r = confirm("Are You sure You want to delete Certification {{ certification.name }}");
                if( r == true){
                    return document.location.href = "/company/{{ company.slug }}/certifications/{{certification.id}}/delete";
                }else{
                    return false;
                }
            }
            </script>
                
            {% endfor %}    
            </ul>
        </div>  

    {% else %}    

            {############################################## Customers #####################################}
        <div class="media">
            <h4 class="media-heading"><strong class="muted">Customers:</strong></h4>

            <ul class="pull-left inline">
            {% for customer in customers  %}
            
                    <li>{{ customer.name }}</li>{% if not forloop.last %}, {% endif %}
            
                
            {% endfor %}
        </div>

        {############################################## Awards #####################################}
        <div class="media">
            <h4 class="media-heading"><strong class="muted">Awards:</strong></h4>
            <ul class="pull-left inline">
            {% for award in awards  %}
                    <li>{{ award.name }}{% if not forloop.last %}, {% endif %}</li>

            {% endfor %}
            </ul>
        </div>

        {############################################## Certifications #####################################}
        <div class="media">
            <h4 class="media-heading"><strong class="muted">Certifications:</strong></h4>

            <ul class="pull-left inline">
            {% for certification in certifications  %}
            
                    <li>{{ certification.name }}</li>{% if not forloop.last %}, {% endif %}
            
                
            {% endfor %}
        </div>


    {% endif %}


</div>

<div class="media">
    <h4 class="media-heading"><strong class="muted">Technologies:</strong></h4>
    <p id="company-technologies">{{ company.technologies }}</p>
</div>



<div class="media">
    <h4 class="media-heading"><strong class="muted">Funding:</strong></h4>
    <p id="#company-funding">{{ company.funding }}</p>

</div>
    {% if  user.is_staff or user.is_superuser or permission %}

    
    

        {############################################## Acquisition ####################################}
        <div class="media">
                

                <h4 class="media-heading"><strong class="muted">Acquisitions:</strong></h4></br>
                <ul class="nav nav-list pull-right">
                    <li><a href="/company/{{ company.slug }}/acquisitions/new"><i class="icon-plus"></i> Add Acquisitions</a></li>
                </ul>

                <br/>
                <ul class="pull-left inline">
                {% for acquisition in acquisitions  %}
                
                        <li><a id="{{ company.slug }}-acquisitions-{{ acquisition.id }}" onclick="{{ company.slug }}_acquisitions_{{ acquisition.id }}(); return false;" href="/company/{{ company.slug }}/acquisitions/{{acquisition.id}}/delete"><i class="icon-remove"></i></a>  <a href="/company/{{ company.slug }}/acquisitions/{{acquisition.id}}/update">{{ acquisition.name }}</a></li>{% if not forloop.last %}, {% endif %}
                
                <script>
                function {{ company.slug }}_acquisitions_{{ acquisition.id }}(){
                    var r = confirm("Are You sure You want to delete acquisition {{ acquisition.name }}");
                    if( r == true){
                        return document.location.href = "/company/{{ company.slug }}/acquisitions/{{acquisition.id}}/delete";
                    }else{
                        return false;
                    }
                }
                </script>
                    
                {% endfor %}    
                </ul>
        </div>

        {####################################### Management #####################################}
    <div class="media">
    <h4 class="media-heading"><strong class="muted">Management:</strong></h4>
    <br/>

        <ul class="nav nav-list pull-right">
            <li><a href="/company/{{ company.slug }}/management/new"><i class="icon-plus"></i> Add Manager</a></li>
        </ul>


        {% for manager in management %}
            <ul class="nav nav-list pull-left">
                <li><a id="{{ company.slug }}-management-{{ manager.id }}" onclick="{{ company.slug }}_management_{{ manager.id }}(); return false;" href="/company/{{ company.slug }}/management/{{manager.id}}/delete"><i class="icon-remove"></i></a></li>
        </ul>
        <script>
        function {{ company.slug }}_management_{{ manager.id }}(){
            var r = confirm("Are You sure You want to delete Manager {{ manager.full_name }}");
            if( r == true){
                return document.location.href = "/company/{{ company.slug }}/management/{{manager.id}}/delete";
            }else{
                return false;
            }
        }
        </script>
            <h5 class="media-heading text-info"> <a href="/company/{{company.slug }}/management/{{ manager.id }}/update">{{ manager.full_name }}</a></h5>
                <p> {{ manager.title }}</p>

        {% endfor %}
    </br>
    </div>


        {############################################## Offices ##############################}
    
    <div class="media">

    <h4 class="media-heading"><strong class="muted">Offices:</strong></h4>
        <ul class="nav nav-list pull-right">
            <p id="company-offices">{{ offices.description }}</p>
            <li><a href="/company/{{ company.slug }}/office/new"><i class="icon-plus"></i> Add Office</a></li>
        </ul>
        <ul class="pull-left inline">
            {% for office in offices %}
             <li>
                <address>
                    <strong><a href="/company/{{company.slug }}/office/{{ office.object.id }}/update">{{ office.object.country }}</a></strong><br>
                    {{ office.object.description }}<br>         
                    {{ office.object.address_1 }}<br>
                    {{ office.object.address_2 }}<br>
                    {% if office.object.phone %}
                      <abbr title="Phone">P:</abbr> {{ office.object.phone }}<br>
                    {% endif %}
               </address>
            </li>

                {% if office.ul  %}
                    </ul><br>
                    
                    <ul class="pull-left inline">
                {% endif %}    
            {% endfor %}
        </ul><br>
    </div>

        {############################################## Competitors ##############################}

    <div class="media"> 
        <h4 class="media-heading"><strong class="muted">Competitors:</strong></h4>
        <ul class="nav nav-list pull-right">
            <li><a href="/company/{{ company.slug }}/competitors/new"><i class="icon-plus"></i> Add Competitor</a></li>
        </ul>

        <br/>
        <ul class="pull-left inline">
        {% for competitor in competitors  %}
        
                <li><a id="{{ company.slug }}-competitors-{{ competitor.id }}" onclick="{{ company.slug }}_competitors_{{ competitor.id }}(); return false;" href="/company/{{ company.slug }}/competitors/{{competitor.id}}/delete"><i class="icon-remove"></i></a>  <a href="/company/{{ company.slug }}/competitors/{{competitor.id}}/update">{{ competitor.name }}</a></li>{% if not forloop.last %}, {% endif %}
        
        <script>
        function {{ company.slug }}_competitors_{{ competitor.id }}(){
            var r = confirm("Are You sure You want to delete Competitor {{ manager.name }}");
            if( r == true){
                return document.location.href = "/company/{{ company.slug }}/competitors/{{competitor.id}}/delete";
            }else{
                return false;
            }
        }
        </script>
            
        {% endfor %}    
        </ul>
    </div>

        {############################################## Pictures ####################################}
        <div class="media">
                

                <h4 class="media-heading"><strong class="muted">pictures:</strong></h4></br>
                <ul class="nav nav-list pull-right">
                    <li><a href="/company/{{ company.slug }}/pictures/new"><i class="icon-plus"></i> Add pictures</a></li>
                </ul>

                <br/>
                <ul class="thumbnails pull-left inline">
                  <div class="row-fluid">
                   
                {% for picture in pictures  %}
        
    
                        <li class="span2" > <a id="{{ company.slug }}-pictures-{{ picture.id }}" onclick="{{ company.slug }}_pictures_{{ picture.id }}(); return false;" href="/company/{{ company.slug }}/pictures/{{ picture.id }}/delete"><i class="icon-remove"></i></a>  <a class="gallery" href="{{ MEDIA_URL }}{{ picture.file}}" > <img  data-src="holder.js/160x120" src="{{ MEDIA_URL }}{{ picture.file}}" width="160" height="160"> </a></li>{% if not forloop.last %}, {% endif %}
                
                    <script>
                    function {{ company.slug }}_pictures_{{ picture.id }}(){
                        var r = confirm("Are You sure You want to delete picture {{ picture.name }}");
                        if( r == true){
                            return document.location.href = "/company/{{ company.slug }}/pictures/{{picture.id}}/delete";
                        }else{
                            return false;
                        }
                    }
                    </script>
                    
                {% endfor %}
                    <br><br>

                    </div>                  
        
                </ul>
        </div>

    {% else %}
            <div class="media">
            <h4 class="media-heading"><strong class="muted">Management:</strong></h4>

        {% for manager in management %}
            <h5 class="media-heading text-info"> {{ manager.full_name }}</h5>
                <p> {{ manager.title }}</p>

        {% endfor %}

        

        {############################################## Competitors #####################################}
        <div class="media">
            <h4 class="media-heading"><strong class="muted">Acquisitions:</strong></h4>
            <ul class="pull-left inline">
            {% for acquisition in acquisitions  %}
                    <li>{{ acquisition.name }}{% if not forloop.last %}, {% endif %}</li>

            {% endfor %}
            </ul>
        </div>
        {############################################## Offices #####################################}

        <div class="media">
            <h4 class="media-heading"><strong class="muted">Offices:</strong></h4>
            <ul class="nav nav-list pull-right">
                <p id="company-offices">{{ offices.description }}</p>
            </ul>
            <ul class="pull-left inline">
                {% for office in offices %}
                 <li>
                    <address>
                        <strong>{{ office.object.country }}</strong><br>
                        {{ office.object.description }}<br>         
                        {{ office.object.address_1 }}<br>
                        {{ office.object.address_2 }}<br>
                   <address>
                </li>

                    {% if office.ul  %}
                        </ul><br>
                        
                        <ul class="pull-left inline">
                    {% endif %}    
                {% endfor %}
            </ul><br>
        </div>

        {############################################## Competitors #####################################}
        <div class="media">
            <h4 class="media-heading"><strong class="muted">Competitors:</strong></h4>
            <ul class="pull-left inline">
            {% for competitor in competitors  %}
                    <li>{{ competitor.name }}{% if not forloop.last %}, {% endif %}</li>

            {% endfor %}
            </ul>
        </div>
        {############################################## Pictures #####################################}

        <div class="media">
            <h4 class="media-heading"><strong class="muted">Pictures: </strong></h4>
            <ul class="thumbnails pull-left inline">
                <div class="row-fluid">

            <br>

            {% if pictures %}
                
                    {% for picture in pictures %}
                    <li class="span2"> <a class="gallery" href="{{ MEDIA_URL }}{{ picture.file}}"><img src="{{ MEDIA_URL }}{{ picture.file}}"></a></li>
                    {% endfor %}
             
            {% endif %}
                </div>
            </ul>
        </div>
    {% endif %}

</div>
</div>
<!--#    project = models.ManyToManyField("Project")

#    links = models.ForeignKey("URLs") -->

<div class="media">
    <h4 class="media-heading"><strong class="muted">Latech Contact:</strong></h4>
    <p id="company-contact">{{ company.contact }}</p>

</div>

{% endblock %}
</div>
